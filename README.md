# Memory Allocation Algorithms Comparison

Сравнение двух алгоритмов выделения памяти с подробным бенчмаркингом.

## Описание

Этот проект реализует и сравнивает два классических алгоритма выделения памяти:

1. **Алгоритм Мак-Кьюзи-Кэрелса (McKusick-Karels)** - Использует классы размеров для эффективного выделения памяти. Основан на подходе, применяемом в BSD Unix.

2. **Алгоритм блоков по степеням 2 (Power-of-2 / Buddy System)** - Выделяет память блоками, размер которых является степенью двойки. Использует систему "приятелей" (buddy system) для эффективного слияния свободных блоков.

## Возможности

- **Полная реализация на C**: Оба алгоритма реализованы на языке C с правильным управлением памятью
- **Управление блоками памяти**: 
  - Динамическое разбиение блоков для эффективного использования пространства
  - Слияние смежных свободных блоков
  - Классы размеров для быстрого выделения (McKusick-Karels)
  - Система приятелей для коалесценции (Power-of-2)
- **Комплексное бенчмаркинг**: Метрики производительности включают:
  - Среднее время выделения
  - Среднее время освобождения
  - Анализ внутренней фрагментации
  - Эффективность использования памяти
  - Подсчет неудачных выделений
  - Общее время выполнения
- **Визуализация**: Подробный вывод состояния памяти и сравнительной производительности алгоритмов
- **Система сборки**: Makefile для простой компиляции с помощью GCC
- **Документация**: Полное описание алгоритмов и инструкции по использованию

## Сборка проекта

### Требования

- Компилятор GCC (или любой C11-совместимый компилятор)
- Утилита Make

### Компиляция

```bash
make
```

Это скомпилирует исходный код и создаст исполняемый файл `memory_benchmark`.

### Запуск

```bash
make run
```

Или запустить исполняемый файл напрямую:

```bash
./memory_benchmark
```

### Очистка

```bash
make clean
```

## Структура проекта

```
.
├── memory_allocation.h    # Заголовочный файл с структурами данных и объявлениями функций
├── memory_allocation.c    # Реализация алгоритмов выделения и бенчмаркинга
├── main.c                 # Основная программа с тестовыми сценариями
├── Makefile              # Конфигурация сборки
└── README.md             # Этот файл
```

## Детали реализации

### Алгоритм Мак-Кьюзи-Кэрелса (McKusick-Karels)

**Описание**: Использует предопределенные классы размеров (16, 32, 64, 128, 256, 512, 1024, 2048, 4096 и т.д.) для эффективного выделения памяти. Каждый класс размера имеет свой список свободных блоков.

**Преимущества**:
- Быстрое выделение - O(1) для поиска подходящего блока
- Минимальная фрагментация для часто используемых размеров
- Простое освобождение памяти

**Недостатки**:
- Внутренняя фрагментация при выделении размеров между классами
- Требует предварительного выделения блоков для каждого класса

### Алгоритм блоков по степеням 2 (Power-of-2 / Buddy System)

**Описание**: Выделяет память блоками, размер которых является степенью двойки. При освобождении блоки могут сливаться с "приятелями" (соседними блоками той же степени) для уменьшения фрагментации.

**Преимущества**:
- Эффективное слияние свободных блоков
- Хорошая производительность для широкого диапазона размеров
- Простой алгоритм коалесценции

**Недостатки**:
- Внутренняя фрагментация из-за округления до степеней двойки
- Более сложная логика выделения и освобождения

### Метрики бенчмаркинга

Бенчмарк измеряет:
- **Среднее время выделения**: Среднее время для выделения блока
- **Среднее время освобождения**: Среднее время для освобождения блока
- **Внутренняя фрагментация**: Разница между выделенной и запрошенной памятью
- **Эффективность памяти**: Процент использованной памяти от выделенной
- **Неудачные выделения**: Количество запросов на выделение, которые не удалось выполнить
- **Общее время**: Общее время выполнения всех операций

## Пример вывода

Программа генерирует подробный вывод, включая:
- Результаты бенчмаркинга для каждого алгоритма
- Сравнительную сводную таблицу
- Анализ производительности
- Визуальную демонстрацию операций выделения/освобождения памяти
- Состояние памяти после каждой операции

## Конфигурация

Вы можете изменить параметры бенчмаркинга в `main.c`:

```c
size_t pool_size = 1024 * 1024;  // Общий размер пула памяти (1 МБ)
size_t num_allocations = 1000;    // Количество операций выделения
```

Размеры выделения генерируются случайным образом между 16 и 4096 байтами по умолчанию.

## Лицензия

Этот проект является открытым исходным кодом и доступен для образовательных целей.

## Автор

Создано для сравнения производительности и поведения алгоритмов выделения памяти.
